// Native Modules
var path = require('path');
var fs = require('fs');
// Custom Modules
var log = require('log');
// Paths
var errors_folder = path.join(__dirname, "..", "..", "public", "errors");
// Exports
module.exports = function(statusCode, request, response) {
  response.writeHead(statusCode);
  var url = request.url;
	var dir = path.dirname(url);
	var file = path.basename(url) || "index.html";
	var ext = path.extname(file) || ".html";
  var path_to_file = path.join(errors_folder, statusCode + ".html");
  fs.readFile(path_to_file, function(err, data){
    if (err) throw err;
    log(" [+] " + request.method + " from " + request.connection.remoteAddress + " for " + path_to_file);
    data +=
      "<b>URL:</b>" + url + "<br>\
      <b>Result:</b>" + dir + file + "<br>\
      <b>Directory: </b>" + dir + "<br>\
      <b>File: </b>" + file + "<br>\
      <b>Extension: </b>" + ext + "<br>";
    response.end(data);
  });
};
